name: pipeline-regression

on:
  pull_request:
  push:
    branches:
      - main

jobs:
  regression:
    runs-on: ubuntu-latest
    timeout-minutes: 40
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Full pipeline regression (analysis + tags + renderer + restart)
        env:
          RABBITMQ_MGMT_USER: guest
          RABBITMQ_MGMT_PASSWORD: guest
        run: ./platform_blueprint/tests/ci/pipeline/run.sh
