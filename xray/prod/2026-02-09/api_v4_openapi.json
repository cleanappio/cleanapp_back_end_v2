{"openapi":"3.0.3","info":{"title":"report-listener-v4","description":"","license":{"name":""},"version":"0.1.0"},"paths":{"/api/v4/brands/summary":{"get":{"tags":["crate"],"summary":"GET /api/v4/brands/summary","operationId":"get_brands_summary","parameters":[{"name":"classification","in":"query","required":true,"schema":{"type":"string"}},{"name":"lang","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Brand counts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BrandSummaryItem"}}}}}}}},"/api/v4/reports/by-brand":{"get":{"tags":["crate"],"summary":"GET /api/v4/reports/by-brand","operationId":"get_reports_by_brand","parameters":[{"name":"brand_name","in":"query","required":true,"schema":{"type":"string"}},{"name":"n","in":"query","required":false,"schema":{"type":"integer","format":"int64","nullable":true,"minimum":0}}],"responses":{"200":{"description":"Reports by brand","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportBatch"}}}}}}},"/api/v4/reports/by-seq":{"get":{"tags":["crate"],"summary":"GET /api/v4/reports/by-seq","operationId":"get_report_by_seq","parameters":[{"name":"seq","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Report by seq","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportWithAnalysis"}}}}}}},"/api/v4/reports/points":{"get":{"tags":["crate"],"summary":"GET /api/v4/reports/points","operationId":"get_report_points","parameters":[{"name":"classification","in":"query","required":false,"schema":{"type":"string","nullable":true}}],"responses":{"200":{"description":"Report points","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReportPoint"}}}}}}}}},"components":{"schemas":{"BrandSummaryItem":{"type":"object","required":["brand_name","brand_display_name","total"],"properties":{"brand_display_name":{"type":"string"},"brand_name":{"type":"string"},"total":{"type":"integer","format":"int64","minimum":0}}},"Report":{"type":"object","required":["seq","timestamp","id","latitude","longitude"],"properties":{"id":{"type":"string"},"image":{"type":"string","format":"binary"},"last_email_sent_at":{"type":"string","nullable":true},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"seq":{"type":"integer","format":"int64"},"source_timestamp":{"type":"string","nullable":true},"timestamp":{"type":"string"}}},"ReportBatch":{"type":"object","required":["reports","count","from_seq","to_seq"],"properties":{"count":{"type":"integer","minimum":0},"from_seq":{"type":"integer","format":"int64"},"reports":{"type":"array","items":{"$ref":"#/components/schemas/ReportWithAnalysis"}},"to_seq":{"type":"integer","format":"int64"}}},"ReportPoint":{"type":"object","required":["seq","severity_level","latitude","longitude"],"properties":{"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"seq":{"type":"integer","format":"int64"},"severity_level":{"type":"number","format":"double"}}},"ReportWithAnalysis":{"type":"object","required":["report","analysis"],"properties":{"analysis":{"type":"array","items":{"$ref":"#/components/schemas/ReportAnalysis"}},"report":{"$ref":"#/components/schemas/Report"}}}}},"tags":[{"name":"report-listener-v4","description":"Brand summaries and reports by brand"}]}